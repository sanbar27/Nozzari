<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nozzarri Tickets | Discord Ticket Bot</title>
  <meta name="description" content="Nozzarri Tickets ‚Äî ticket bot for Discord. Support & Trade tickets, clean panels, logs, and more." />

  <!-- Social preview -->
  <meta property="og:title" content="Nozzarri Tickets | Discord Ticket Bot" />
  <meta property="og:description" content="Ticket bot ‚Äî Support & Trade tickets, clean panels, logs, and more." />
  <meta property="og:type" content="website" />

  <!-- ICON / LOGO -->
  <link rel="icon" href="assets/nozzarri.png" />

  <style>
    :root{
      --bg:#070810;
      --bg2:#0b0e1c;
      --card:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.10);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.72);
      --muted2:rgba(234,240,255,.56);

      --accent:#7c5cff;
      --accent2:#00d4ff;
      --good:#19d38b;
      --warn:#f5b301;
      --bad:#ff4d6d;

      --shadow: 0 20px 60px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 24px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(124,92,255,.25), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(0,212,255,.20), transparent 55%),
        radial-gradient(800px 600px at 60% 90%, rgba(25,211,139,.12), transparent 55%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      overflow-x:hidden;
    }

    a{color:inherit;text-decoration:none}
    button{font-family:inherit}

    .noise{
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.25'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
      opacity:.08;
    }

    /* top nav */
    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: rgba(8,10,18,.62);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .topbar-inner{
      max-width:1200px; margin:0 auto;
      padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:900;
      letter-spacing:.2px;
      min-width: 220px;
    }
    .brandImg{
      width:32px; height:32px;
      border-radius: 10px;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 0 24px rgba(124,92,255,.22);
      background: rgba(255,255,255,.06);
    }
    .brand small{
      display:block;
      font-weight:700;
      color:var(--muted2);
      letter-spacing:.6px;
      margin-top:2px;
    }

    .navBtns{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }
    .pillBtn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      cursor:pointer;
      font-weight:850;
      font-size:13px;
      display:flex; align-items:center; gap:8px;
      transition: .18s transform, .18s background, .18s border-color;
    }
    .pillBtn:hover{
      transform: translateY(-1px);
      border-color: rgba(124,92,255,.35);
      background: rgba(124,92,255,.10);
    }
    .pillBtn.primary{
      border-color: rgba(124,92,255,.45);
      background: linear-gradient(90deg, rgba(124,92,255,.22), rgba(0,212,255,.14));
    }

    /* main container */
    .container{
      max-width:1200px;
      margin:0 auto;
      padding:22px 18px 44px;
    }

    /* views */
    .view{display:none}
    .view.show{display:block; animation: viewIn .22s ease-out}
    @keyframes viewIn{from{opacity:.0; transform: translateY(6px)} to{opacity:1; transform:none}}

    /* cards */
    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:16px;
    }
    @media (min-width: 920px){
      .grid.two{grid-template-columns: 1.1fr .9fr}
      .grid.three{grid-template-columns: repeat(3, 1fr)}
    }

    /* hero */
    .hero{
      padding:18px;
      border-radius: var(--radius2);
      background:
        radial-gradient(900px 500px at 20% 10%, rgba(124,92,255,.25), transparent 60%),
        radial-gradient(600px 500px at 90% 40%, rgba(0,212,255,.14), transparent 60%),
        rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .heroTop{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; flex-wrap:wrap;
    }
    .pill{
      display:inline-flex; align-items:center; gap:10px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      font-weight:900;
      font-size:12px;
      color: var(--muted);
    }
    .pill .dot{
      width:9px; height:9px; border-radius:999px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 0 18px rgba(0,212,255,.35);
    }
    h1{
      margin:14px 0 8px;
      font-size: clamp(26px, 4vw, 44px);
      line-height:1.05;
      letter-spacing:-.6px;
    }
    .grad{
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .lead{
      margin:0;
      color: var(--muted);
      font-weight:700;
      line-height:1.55;
      max-width: 70ch;
    }

    .ctaRow{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:16px;
    }
    .btn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:11px 14px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:950;
      letter-spacing:.2px;
      transition:.18s transform,.18s background,.18s border-color;
      display:inline-flex; align-items:center; gap:10px;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(0,212,255,.28); background: rgba(0,212,255,.10)}
    .btn.primary{
      border-color: rgba(124,92,255,.45);
      background: linear-gradient(90deg, rgba(124,92,255,.26), rgba(0,212,255,.14));
    }
    .btn.ghost{ background: rgba(255,255,255,.03); }

    /* gate cards */
    .gateGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
      margin-top:14px;
    }
    @media (min-width: 920px){
      .gateGrid{grid-template-columns:1fr 1fr}
    }
    .pick{
      position:relative;
      padding:16px;
      border-radius: var(--radius2);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      overflow:hidden;
      cursor:pointer;
      transition:.18s transform,.18s border-color,.18s background;
    }
    .pick:hover{
      transform: translateY(-2px);
      border-color: rgba(124,92,255,.30);
      background: rgba(124,92,255,.06);
    }
    .pickGlow{
      position:absolute; inset:-140px;
      background: radial-gradient(circle at 20% 10%, rgba(124,92,255,.25), transparent 50%),
                  radial-gradient(circle at 80% 30%, rgba(0,212,255,.18), transparent 50%);
      opacity:.6;
      pointer-events:none;
    }
    .pickTop{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .tag{
      font-weight:1000; font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
    }
    .tag.free{border-color: rgba(25,211,139,.35); background: rgba(25,211,139,.08)}
    .tag.prem{border-color: rgba(245,179,1,.35); background: rgba(245,179,1,.10)}
    .kbd{color:var(--muted2); font-weight:850; font-size:12px}
    .pickTitle{font-size:18px; font-weight:1100; margin-top:10px}
    .pickText{color:var(--muted); font-weight:750; line-height:1.5; margin-top:8px}
    .pickBtns{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .miniBtn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:950;
      transition:.18s transform,.18s background,.18s border-color;
    }
    .miniBtn:hover{transform: translateY(-1px); border-color: rgba(0,212,255,.28); background: rgba(0,212,255,.10)}
    .miniBtn.primary{
      border-color: rgba(124,92,255,.45);
      background: linear-gradient(90deg, rgba(124,92,255,.26), rgba(0,212,255,.14));
    }

    .sectionTitle{
      font-weight:1100;
      font-size:16px;
      letter-spacing:.2px;
      margin:0;
      padding:14px 14px 0;
    }
    .sectionBody{
      padding:14px;
      color:var(--muted);
      font-weight:750;
      line-height:1.6;
    }

    .listRow{
      display:flex; justify-content:space-between; align-items:center;
      gap:12px;
      padding:12px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.04);
      border-radius: 16px;
      transition:.16s transform,.16s border-color,.16s background;
      margin-top:10px;
    }
    .listRow:hover{transform: translateY(-1px); border-color: rgba(124,92,255,.25); background: rgba(124,92,255,.06)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}

    /* dashboard preview */
    .dashShell{
      display:grid; gap:14px;
      grid-template-columns: 1fr;
    }
    @media(min-width: 980px){
      .dashShell{grid-template-columns: 280px 1fr}
    }
    .dashNav{ padding:12px; }
    .dashNav .dashBtn{ width:100%; text-align:left; margin-top:10px; border-radius: 16px; }
    .dashPanel{ padding:14px; min-height: 320px; }

    /* toast */
    .toast{
      position:fixed;
      left:50%; bottom:18px;
      transform: translateX(-50%);
      padding:12px 14px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(12,14,26,.92);
      box-shadow: var(--shadow);
      color: var(--text);
      font-weight:950;
      z-index:90;
      opacity:0;
      pointer-events:none;
      transition: .18s opacity, .18s transform;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-2px);
    }

    /* loader */
    .loader{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      background: radial-gradient(900px 600px at 20% 10%, rgba(124,92,255,.25), transparent 60%),
                  radial-gradient(800px 600px at 80% 30%, rgba(0,212,255,.20), transparent 60%),
                  linear-gradient(180deg, #060711, #090b16);
      z-index: 120;
      transition: .35s opacity, .35s transform;
    }
    .loader.hide{opacity:0; pointer-events:none; transform: scale(1.02)}
    .loadCard{
      width:min(540px, 100%);
      border-radius: 24px;
      padding:18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow);
    }
    .bar{
      width:100%; height:10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      margin-top:12px;
    }
    .barFill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius: 999px;
      transition: width .22s ease;
    }
    .loadRow{
      display:flex; justify-content:space-between; align-items:center;
      color: var(--muted);
      font-weight:850;
      font-size:13px;
      margin-top:10px;
    }

    footer{
      margin-top:22px;
      color: var(--muted2);
      font-weight:800;
      font-size:12px;
      text-align:center;
      opacity:.9;
    }
  </style>
</head>

<body>
  <div class="noise" aria-hidden="true"></div>

  <!-- LOADER -->
  <div class="loader" id="loader" aria-hidden="false">
    <div class="loadCard">
      <div style="display:flex; align-items:center; gap:10px;">
        <img src="assets/nozzarri.png" alt="Nozzarri" class="brandImg" onerror="this.style.display='none'">
        <div style="font-weight:1100; letter-spacing:.2px;">Nozzarri Tickets</div>
      </div>
      <div class="loadRow">
        <span id="loadText">Booting</span>
        <span id="loadPct">0%</span>
      </div>
      <div class="bar"><div class="barFill" id="barFill"></div></div>
      <div class="hint">Loading UI, routes, and animations‚Ä¶</div>
    </div>
  </div>

  <!-- TOP NAV -->
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <img src="assets/nozzarri.png" alt="Nozzarri" class="brandImg" onerror="this.style.display='none'">
        <div>
          Nozzarri Tickets
          <small>Free ‚Ä¢ Premium ‚Ä¢ Dashboard</small>
        </div>
      </div>

      <div class="navBtns">
        <button class="pillBtn" id="navUndo" type="button" title="Undo last menu change">‚Ü© Undo</button>
        <button class="pillBtn" id="navHome" type="button">üè† Home</button>
        <button class="pillBtn" id="navFree" type="button">‚úÖ Free</button>
        <button class="pillBtn" id="navPremium" type="button">üíé Premium</button>
        <button class="pillBtn primary" id="navDashboard" type="button">üß© Dashboard</button>
      </div>
    </div>
  </div>

  <div class="container">

    <!-- HOME -->
    <div class="view show" id="gateRoot">
      <div class="hero">
        <div class="heroTop">
          <div class="pill"><span class="dot"></span> Ticket Bot ‚Ä¢ Panels ‚Ä¢ Logs ‚Ä¢ Clean UI</div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="pillBtn" id="copySite" type="button" title="Copy website link">üîó Copy site</button>
            <button class="pillBtn" id="openDiscord" type="button">üí¨ Discord</button>
            <button class="pillBtn" id="openYoutube" type="button">‚ñ∂Ô∏è YouTube</button>
          </div>
        </div>

        <h1>Tickets with <span class="grad">premium</span> style</h1>
        <p class="lead">
          Nozzarri Tickets gives you Support + Trade tickets, clean panels, logs, and safer permission checks.
          Use the dashboard to manage settings.
        </p>

        <div class="ctaRow">
          <button class="btn primary" id="goFree" type="button">‚úÖ Open Free</button>
          <button class="btn" id="goPrem" type="button">üíé Open Premium</button>
          <button class="btn ghost" id="goDash" type="button">üß© Open Dashboard</button>
        </div>

        <div class="gateGrid" aria-label="Select plan">
          <!-- FREE -->
          <div class="pick" id="pickFree" role="button" tabindex="0" aria-label="Select Free">
            <div class="pickGlow" aria-hidden="true"></div>
            <div class="pickTop">
              <div class="tag free">FREE</div>
              <div class="kbd">main commands</div>
            </div>
            <div class="pickTitle">Nozzarri Tickets ‚Äî Free</div>
            <div class="pickText">
              Support + Ticket panels + basic commands. Dashboard is accessible.
            </div>
            <div class="pickBtns">
              <button class="miniBtn primary" id="freeOpen" type="button">Open Free</button>
              <button class="miniBtn" id="freeInvite" type="button">Join Discord</button>
            </div>
          </div>

          <!-- PREMIUM -->
          <div class="pick" id="pickPrem" role="button" tabindex="0" aria-label="Select Premium">
            <div class="pickGlow" aria-hidden="true"></div>
            <div class="pickTop">
              <div class="tag prem">PREMIUM</div>
              <div class="kbd">extra options</div>
            </div>
            <div class="pickTitle">Nozzarri Tickets ‚Äî Premium</div>
            <div class="pickText">
              Premium adds extra customization. (Dashboard stays free; premium settings can be locked.)
            </div>
            <div class="pickBtns">
              <button class="miniBtn primary" id="premOpen" type="button">Open Premium</button>
              <button class="miniBtn" id="premDiscord" type="button">Discord</button>
            </div>
          </div>
        </div>
      </div>

      <div class="grid three" style="margin-top:16px;">
        <div class="card">
          <p class="sectionTitle">‚ö° Fast setup</p>
          <div class="sectionBody">Clean panels, simple flows, and smart permission checks.</div>
        </div>
        <div class="card">
          <p class="sectionTitle">üßæ Panels</p>
          <div class="sectionBody">Support / Ticket panels for easy usage.</div>
        </div>
        <div class="card">
          <p class="sectionTitle">üß© Dashboard</p>
          <div class="sectionBody">Login with Discord, select your server, and change settings.</div>
        </div>
      </div>

      <footer>
        ¬© <span id="year"></span> Nozzarri Tickets ‚Ä¢ Built for Discord communities
      </footer>
    </div>

    <!-- FREE VIEW -->
    <div class="view" id="freeView">
      <div class="hero">
        <div class="heroTop">
          <div class="pill"><span class="dot"></span> Free ‚Ä¢ Commands</div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="pillBtn" id="backGate1" type="button">‚¨Ö Back</button>
            <button class="pillBtn primary" id="freeDashBtn" type="button">üß© Dashboard</button>
          </div>
        </div>

        <h1>Free bot, <span class="grad">simple</span> commands</h1>
        <p class="lead">
          These are the only commands shown on the website (no fake ones).
        </p>

        <div class="ctaRow">
          <a class="btn primary" id="inviteBtn3" href="#" target="_blank" rel="noreferrer">üí¨ Join Discord</a>
          <a class="btn ghost" id="botBtn3" href="#" target="_blank" rel="noreferrer">‚ûï Add Bot</a>
          <button class="btn" id="copyInvite3" type="button">üìã Copy server invite</button>
          <a class="btn ghost" id="youtubeBtn3" href="#" target="_blank" rel="noreferrer">‚ñ∂Ô∏è YouTube</a>
        </div>
      </div>

      <div class="grid two" style="margin-top:16px;">
        <div class="card">
          <p class="sectionTitle">‚úÖ Free features</p>
          <div class="sectionBody" id="freeFeatures"></div>
        </div>

        <div class="card">
          <p class="sectionTitle">‚å®Ô∏è Commands</p>
          <div class="sectionBody" id="freeCommands"></div>
        </div>
      </div>

      <footer>
        Tip: use the <b class="mono">Dashboard</b> button to manage servers.
      </footer>
    </div>

    <!-- PREMIUM VIEW -->
    <div class="view" id="premView">
      <div class="hero">
        <div class="heroTop">
          <div class="pill"><span class="dot"></span> Premium ‚Ä¢ Info</div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="pillBtn" id="backGate2" type="button">‚¨Ö Back</button>
            <button class="pillBtn primary" id="premDashBtn" type="button">üß© Dashboard</button>
          </div>
        </div>

        <h1>Nozzarri Tickets <span class="grad">Premium</span></h1>
        <p class="lead">
          Premium adds extra features. Website does not list ‚Äúrandom commands‚Äù.
        </p>

        <div class="ctaRow">
          <button class="btn primary" id="openRealDash2" type="button">üß© Open Real Dashboard</button>
        </div>
      </div>

      <div class="grid two" style="margin-top:16px;">
        <div class="card">
          <p class="sectionTitle">‚≠ê What premium means</p>
          <div class="sectionBody">
            Premium can unlock extra settings in the dashboard (themes, more config etc).
            <div class="hint" style="margin-top:10px;">
              Dashboard itself stays usable for everyone ‚Äî only premium settings should be locked.
            </div>
          </div>
        </div>

        <div class="card">
          <p class="sectionTitle">‚úÖ Real commands (website)</p>
          <div class="sectionBody">
            This website only shows:
            <div class="listRow"><div><div class="mono" style="font-weight:1100;">?help</div><div class="hint">Help / info</div></div></div>
            <div class="listRow"><div><div class="mono" style="font-weight:1100;">?ticket</div><div class="hint">Ticket panel</div></div></div>
            <div class="listRow"><div><div class="mono" style="font-weight:1100;">?support</div><div class="hint">Support panel</div></div></div>
          </div>
        </div>
      </div>

      <footer>
        Want the real dashboard? Click <b class="mono">Open Real Dashboard</b>.
      </footer>
    </div>

    <!-- DASHBOARD VIEW -->
    <div class="view" id="dashView">
      <div class="hero">
        <div class="heroTop">
          <div class="pill"><span class="dot"></span> Dashboard ‚Ä¢ FREE</div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="pillBtn" id="backGate3" type="button">‚¨Ö Back</button>
            <button class="pillBtn primary" id="openRealDash" type="button">üß© Open Real Dashboard</button>
          </div>
        </div>

        <h1>Real <span class="grad">Dashboard</span> access</h1>
        <p class="lead">
          This page is the website UI preview. The real dashboard is hosted by your backend (index.js).
        </p>

        <div class="ctaRow">
          <button class="btn primary" id="dashLoginBtn" type="button">üîê Login (Real Dashboard)</button>
          <button class="btn" id="dashUndoBtn" type="button">‚Ü© Undo (Dashboard menu)</button>
        </div>
      </div>

      <div class="card" style="margin-top:16px;">
        <div class="dashShell">
          <div class="dashNav">
            <div style="font-weight:1100; padding:10px 8px; color:var(--muted);">Dashboard Menu</div>
            <button class="btn dashBtn primary" id="menuOverview" type="button">üìå Overview</button>
            <button class="btn dashBtn" id="menuCommands" type="button">‚å®Ô∏è Commands</button>
            <button class="btn dashBtn" id="menuFAQ" type="button">‚ùì FAQ</button>

            <div class="hint" style="margin-top:12px; padding:0 8px;">
              This switches panels instantly (no scrolling).
            </div>
          </div>

          <div class="dashPanel" id="dashPanel"></div>
        </div>
      </div>

      <footer>
        Real dashboard URL: <b class="mono" id="realDashUrl"></b>
      </footer>
    </div>

  </div>

  <!-- TOAST -->
  <div class="toast" id="toast" aria-hidden="true"></div>

  <script>
    // ============================================================
    // CONFIG (EDIT THESE)
    // ============================================================
    const SITE_URL = location.origin;

    // Your Discord server invite
    const SERVER_INVITE_URL = "https://discord.gg/FHRSPyXw";

    // Your bot invite
    const BOT_INVITE_URL = "https://discord.com/oauth2/authorize?client_id=1442592762108186675";

    // Youtube / updates link
    const YOUTUBE_URL = "https://www.youtube.com/";

    // REAL DASHBOARD BASE (backend from index.js)
    const DASHBOARD_BASE = "http://85.215.159.4:9717";

    // ============================================================
    // HELPERS
    // ============================================================
    const $ = (id) => document.getElementById(id);

    function showToast(msg){
      const t = $("toast");
      t.textContent = msg;
      t.classList.add("show");
      t.setAttribute("aria-hidden","false");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>{
        t.classList.remove("show");
        t.setAttribute("aria-hidden","true");
      }, 1400);
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        showToast("Copied ‚úÖ");
      }catch{
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        showToast("Copied ‚úÖ");
      }
    }

    function openUrl(url){
      window.open(url, "_blank", "noopener,noreferrer");
    }

    // ============================================================
    // LOADER
    // ============================================================
    const loader = $("loader");
    const loadText = $("loadText");
    const loadPct = $("loadPct");
    const barFill = $("barFill");
    const steps = [
      ["Booting UI", 12],
      ["Loading assets", 32],
      ["Preparing menus", 60],
      ["Finalizing", 90],
      ["Ready", 100],
    ];
    (function runLoader(){
      let i = 0;
      function step(){
        const [t, p] = steps[i];
        loadText.textContent = t;
        barFill.style.width = p + "%";
        loadPct.textContent = p + "%";
        i++;
        if(i < steps.length){
          setTimeout(step, 180 + Math.random()*160);
        }else{
          setTimeout(() => loader.classList.add("hide"), 320);
        }
      }
      setTimeout(step, 220);
    })();

    // ============================================================
    // VIEWS + HISTORY (UNDO)
    // ============================================================
    const gateRoot = $("gateRoot");
    const freeView = $("freeView");
    const premView = $("premView");
    const dashView = $("dashView");

    const historyStack = []; // { viewId, dashPanelKey? }

    function currentViewId(){
      if(gateRoot.classList.contains("show")) return "gateRoot";
      if(freeView.classList.contains("show")) return "freeView";
      if(premView.classList.contains("show")) return "premView";
      if(dashView.classList.contains("show")) return "dashView";
      return "gateRoot";
    }

    function hideAllViews(){
      [gateRoot, freeView, premView, dashView].forEach(v=>{
        v.classList.remove("show");
        v.style.display = "none";
      });
    }
    function showViewById(id){
      hideAllViews();
      const el = $(id);
      el.style.display = "block";
      el.classList.add("show");
    }

    function pushHistory(next){
      const cur = { viewId: currentViewId(), dashPanelKey: dashState.activeKey };
      const last = historyStack[historyStack.length - 1];
      // avoid duplicates
      if(!last || last.viewId !== cur.viewId || last.dashPanelKey !== cur.dashPanelKey){
        historyStack.push(cur);
      }
    }

    function undo(){
      const prev = historyStack.pop();
      if(!prev){
        showToast("Nothing to undo");
        return;
      }
      showViewById(prev.viewId);
      if(prev.viewId === "dashView"){
        setDashPanel(prev.dashPanelKey || "overview", false);
      }
      showToast("Undo ‚Ü©");
    }

    // show helpers (these push history)
    function showGate(){ pushHistory(); showViewById("gateRoot"); }
    function showFree(){ pushHistory(); showViewById("freeView"); }
    function showPrem(){ pushHistory(); showViewById("premView"); }
    function showDash(){ pushHistory(); showViewById("dashView"); setDashPanel(dashState.activeKey || "overview", false); }

    // ============================================================
    // TOP NAV
    // ============================================================
    $("navUndo").addEventListener("click", undo);
    $("navHome").addEventListener("click", showGate);
    $("navFree").addEventListener("click", showFree);
    $("navPremium").addEventListener("click", showPrem);
    $("navDashboard").addEventListener("click", showDash);

    // home CTA buttons
    $("goFree").addEventListener("click", showFree);
    $("goPrem").addEventListener("click", showPrem);
    $("goDash").addEventListener("click", showDash);

    // gate cards
    $("pickFree").addEventListener("click", (e)=>{ if(e.target.closest("button")) return; showFree(); });
    $("pickPrem").addEventListener("click", (e)=>{ if(e.target.closest("button")) return; showPrem(); });
    $("freeOpen").addEventListener("click", showFree);
    $("premOpen").addEventListener("click", showPrem);

    // back buttons
    $("backGate1").addEventListener("click", ()=>{ pushHistory(); showGate(); });
    $("backGate2").addEventListener("click", ()=>{ pushHistory(); showGate(); });
    $("backGate3").addEventListener("click", ()=>{ pushHistory(); showGate(); });

    // ============================================================
    // LINKS
    // ============================================================
    $("openDiscord").addEventListener("click", ()=>openUrl(SERVER_INVITE_URL));
    $("openYoutube").addEventListener("click", ()=>openUrl(YOUTUBE_URL));
    $("freeInvite").addEventListener("click", ()=>openUrl(SERVER_INVITE_URL));
    $("premDiscord").addEventListener("click", ()=>openUrl(SERVER_INVITE_URL));

    $("inviteBtn3").href = SERVER_INVITE_URL;
    $("botBtn3").href = BOT_INVITE_URL;
    $("youtubeBtn3").href = YOUTUBE_URL;

    $("copyInvite3").addEventListener("click", ()=>copyText(SERVER_INVITE_URL));
    $("copySite").addEventListener("click", ()=>copyText(SITE_URL));

    // ============================================================
    // REAL DASHBOARD OPEN
    // ============================================================
    const REAL_DASH_URL = DASHBOARD_BASE.replace(/\/+$/,"") + "/dashboard";
    $("realDashUrl").textContent = REAL_DASH_URL;

    function openRealDashboard(){
      openUrl(REAL_DASH_URL);
    }
    $("openRealDash").addEventListener("click", openRealDashboard);
    $("dashLoginBtn").addEventListener("click", openRealDashboard);
    $("freeDashBtn").addEventListener("click", openRealDashboard);
    $("premDashBtn").addEventListener("click", openRealDashboard);
    $("openRealDash2").addEventListener("click", openRealDashboard);

    // ============================================================
    // FREE CONTENT (ONLY REAL COMMANDS YOU SAID)
    // ============================================================
    const freeFeatures = [
      "‚úÖ Support panel",
      "‚úÖ Ticket panel",
      "‚úÖ Clean buttons UI",
      "‚úÖ Dashboard access (free)"
    ];

    const realCommands = [
      { cmd: "?help", desc: "Shows help / info" },
      { cmd: "?ticket", desc: "Ticket panel" },
      { cmd: "?support", desc: "Support panel" }
    ];

    $("freeFeatures").innerHTML =
      freeFeatures.map(x=>`<div class="listRow"><div style="font-weight:950;">${x}</div><div class="hint">Free</div></div>`).join("");

    $("freeCommands").innerHTML =
      realCommands.map(c=>`
        <div class="listRow">
          <div>
            <div class="mono" style="font-weight:1100;">${c.cmd}</div>
            <div class="hint">${c.desc}</div>
          </div>
          <button class="btn" type="button" data-copy="${c.cmd}">Copy</button>
        </div>
      `).join("");

    document.querySelectorAll("[data-copy]").forEach(btn=>{
      btn.addEventListener("click", ()=>copyText(btn.getAttribute("data-copy")));
    });

    // ============================================================
    // DASHBOARD PREVIEW (NO SCROLL, UNDO)
    // ============================================================
    const dashPanel = $("dashPanel");
    const menuOverview = $("menuOverview");
    const menuCommands = $("menuCommands");
    const menuFAQ = $("menuFAQ");

    const dashState = { activeKey: "overview" };

    function setDashActive(btn){
      [menuOverview, menuCommands, menuFAQ].forEach(b=>b.classList.remove("primary"));
      btn.classList.add("primary");
    }

    function renderOverview(){
      dashPanel.innerHTML = `
        <div style="font-weight:1100; font-size:16px;">üìå Overview</div>
        <div class="hint" style="margin-top:8px;">
          Dashboard is FREE. Premium settings (if any) should only be locked inside the real panel.
        </div>

        <div class="listRow">
          <div>
            <div style="font-weight:1100;">Open Real Dashboard</div>
            <div class="hint">Login with Discord and manage your server settings.</div>
          </div>
          <button class="btn primary" id="openRealDashInside" type="button">Open</button>
        </div>

        <div class="hint" style="margin-top:10px;">
          URL: <span class="mono">${REAL_DASH_URL}</span>
        </div>
      `;
      $("openRealDashInside").addEventListener("click", openRealDashboard);
    }

    function renderCommands(){
      dashPanel.innerHTML = `
        <div style="font-weight:1100; font-size:16px;">‚å®Ô∏è Commands</div>
        <div class="hint" style="margin-top:8px;">Only the real commands you asked for:</div>

        ${realCommands.map(c=>`
          <div class="listRow">
            <div>
              <div class="mono" style="font-weight:1100;">${c.cmd}</div>
              <div class="hint">${c.desc}</div>
            </div>
            <button class="btn" type="button" data-dcopy="${c.cmd}">Copy</button>
          </div>
        `).join("")}
      `;
      dashPanel.querySelectorAll("[data-dcopy]").forEach(btn=>{
        btn.addEventListener("click", ()=>copyText(btn.getAttribute("data-dcopy")));
      });
    }

    function renderFAQ(){
      dashPanel.innerHTML = `
        <div style="font-weight:1100; font-size:16px;">‚ùì FAQ</div>

        <div class="listRow">
          <div>
            <div style="font-weight:1100;">Where is the real dashboard?</div>
            <div class="hint"><span class="mono">${REAL_DASH_URL}</span></div>
          </div>
          <button class="btn" id="copyDashUrl" type="button">Copy</button>
        </div>

        <div class="listRow">
          <div>
            <div style="font-weight:1100;">Why is it a different page?</div>
            <div class="hint">Because OAuth + sessions are handled by your backend.</div>
          </div>
          <div class="tag free">Info</div>
        </div>
      `;
      $("copyDashUrl").addEventListener("click", ()=>copyText(REAL_DASH_URL));
    }

    function setDashPanel(key, push=true){
      if(push) pushHistory();
      dashState.activeKey = key;

      if(key === "overview"){ setDashActive(menuOverview); renderOverview(); }
      if(key === "commands"){ setDashActive(menuCommands); renderCommands(); }
      if(key === "faq"){ setDashActive(menuFAQ); renderFAQ(); }
    }

    menuOverview.addEventListener("click", ()=>setDashPanel("overview", true));
    menuCommands.addEventListener("click", ()=>setDashPanel("commands", true));
    menuFAQ.addEventListener("click", ()=>setDashPanel("faq", true));

    $("dashUndoBtn").addEventListener("click", undo);

    // defaults
    setDashPanel("overview", false);

    // misc
    $("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
